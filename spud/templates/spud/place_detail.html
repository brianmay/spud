{% extends "base_site.html" %}
{% load i18n %}
{% load photo %}

{% block stylesheet %}{{ MEDIA_URL }}css/photolists.css{% endblock %}

{% block breadcrumbs %}{% show_breadcrumbs breadcrumbs %}{% endblock %}

{% block title %}{{object}}{% endblock %}

{% block content %}
{% pagination page_obj %}

<h1>{{object}}</h1>

{% if object %}
{% get_permissions_from_type "add_perm" "edit_perm" "delete_perm" user object.type %}
{% if add_perm or edit_perm or delete_perm %}
<ul class="object-tools">
{% if add_perm %}
<li><a class="addlink" href="{{ object.get_create_url }}">Create</a></li>
{% endif %}
{% if edit_perm %}
<li><a class="changelink" href="{{ object.get_edit_url }}">Edit</a></li>
{% endif %}
{% if delete_perm %}
<li><a class="deletelink" href="{{ object.get_delete_url }}">Delete</a></li>
{% endif %}
</ul>
{% endif %}

{%ifequal page_obj.number 1 %}
<dl class="infobox">
    {% if object.address or object.address2 or object.city or object.zip or object.state or object.country %}
    <dt>Address</dt><dd>
{% if user.is_staff %}
      {% if object.address %}{{object.address}}<br/>{% endif %}
      {% if object.address2 %}{{object.address2}}<br/>{% endif %}
{% endif %}
      {% if object.city %}{{object.city}}{% endif %}
      {% if object.zip %}{{object.zip}}{% endif %}
      {% if object.city or object.zip %}<br/>{% endif %}
      {% if object.state %}{{object.state}}{% endif %}{% if object.state and object.country %},{% endif %}
      {% if object.country %} {{object.country}}{% endif %}
    </dd>
    {% endif %}
    {% if object.notes %}
    <dt>Notes</dt><dd>{{object.notes|urlizetrunc:40|linebreaks}}</dd>
    {% endif %}
{% if user.is_staff %}
    {% if object.work_of.all %}
    <dt>Work of</dt><dd>
      {% for place in object.work_of.all %}
        <a href="{{ place.get_absolute_url }}">{{place}}</a>{% if not forloop.last %}; {% endif %}
      {% endfor %}
    </dd>
    {% endif %}
    {% if object.home_of.all %}
    <dt>Home of</dt><dd>
      {% for place in object.home_of.all %}
        <a href="{{ place.get_absolute_url }}">{{place}}</a>{% if not forloop.last %}; {% endif %}
      {% endfor %}
    </dd>
    {% endif %}
{% endif %}
{% if object.url %}
<dt>URL</dt><dd><a href="{{object.url}}">{{object.urldesc}}</a></dd>
{% endif %}
</dl>

{% if object.children.all %}
    <ul class="children">
    {% for place in object.children.all %}
        <li><a href="{{ place.get_absolute_url }}">{{ place }}</a></li>
    {% endfor %}
    </ul>
{% endif %}
{% endifequal %}
{% endif %}

{% show_photo_list page_obj links %}

{% pagination page_obj %}

{% endblock %}
